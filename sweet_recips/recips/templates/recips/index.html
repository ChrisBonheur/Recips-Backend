<!DOCTYPE html>
<html lang="fr" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Recips</title>
  </head>
  <body>
    <h1>Bienvenue dans l'univers des belles recettes</h1>

    <div class="">
        {% for recip in recips_pagined %}
          <div style="background: pink">
            <p>{{ recip.name }}</p>
            <p>ingredients :</p>
            {% for ingredient in recip.get_ingredients %}
            <li>{{ ingredient }}</li>
            {% endfor %}
          </div>
          <div>
            <h2>Liste des {{ ingredients_missing|length }} ingredients manquant pour cette recette</h2>
            <ol>
              {% for ingredient in ingredients_missing %}
                <li>{{ ingredient }}</li>
              {% empty %}
                <p>Tout est au complet comme ingredient pour cette recette</p>
              {% endfor %}
            </ol>
          </div>
        {% empty %}
          <p>Aucune recette disponible</p>
        {% endfor %}

        {% if recips_pagined.has_previous %}
        <li class="page-item "><a class="page-link" href="?page={{ recips_pagined.previous_page_number }}">Pr√©c</a></li>
        {% endif %}

        {% if recips_pagined.has_next %}
        <li class="page-item "><a class="page-link" href="?page={{ recips_pagined.next_page_number }}">Suivant</a></li>
        {% endif %}

    </div>
    <h2>Entrez vos ingredients disponible ici</h2>
    <form class="" action="{% url 'home' %}" method="post">
      {% csrf_token %}
      <div id="liste_ingredients">
        <input type="text" name="ingredient1" class="ingredients"><br>
      </div>

      <button>Ajouter un autre ingredient</button>

      <p>
        <input type="submit" name="" value="Trouver recettes dispo">
      </p>

      <div>

      </div>
    </form>

    <script type="text/javascript">
      let ajout = document.getElementsByTagName('button');
      ajout = ajout[0];
      let divElt = document.getElementById('liste_ingredients');
      let i = 1;
      ajout.addEventListener('click', function(e){
          e.preventDefault();
          i++;
          let brElt = document.createElement('br');
          let input = document.createElement('input');
          input.setAttribute("name", `ingredient${i}`);
          divElt.appendChild(input);
          divElt.appendChild(brElt);
      });
    </script>
  </body>
</html>
